<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
    <head>
        <!-- Mobile Specific Meta -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Always force latest IE rendering engine -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- Meta Keyword -->
        <meta name="keywords" content="one page, business template, single page, onepage, responsive, parallax, creative, business, html5, css3, css3 animation">
        <!-- meta character set -->
        <meta charset="utf-8">

        <!-- Site Title -->
        <title>Dpcore - picture storage service</title>
        
        <!--
        Google Fonts
        ============================================= -->
        <link href="css/opengoog.css " rel="stylesheet" type="text/css">
        <link href="css/baloogoog.css " rel="stylesheet" type="text/css" >
        <link href="css/relegoog.css " rel='stylesheet' type='text/css'>

        <!--
        CSS
        ============================================= -->
        <!-- Fontawesome -->
        <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
        <!-- Bootstrap -->
        <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
        <!-- Fancybox -->
        <link rel="stylesheet" href="css/jquery.fancybox.css" type="text/css">
        <!-- owl carousel -->
        <link rel="stylesheet" href="css/owl.carousel.css" type="text/css">
        <!-- Animate -->
        <link rel="stylesheet" href="css/animate.css" type="text/css">
        <!-- Main Stylesheet -->
        <link rel="stylesheet" href="css/main.css" type="text/css">
        <!-- Main Responsive -->
        <link rel="stylesheet" href="css/responsive.css" type="text/css">
		
		<!-- Modernizer Script for old Browsers -->
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
		
    </head>
	
    <body>

        <!--
        Fixed Navigation
        ==================================== -->
        <header id="navigation" class="navbar-fixed-top">
            <div class="container">

                <div class="navbar-header">
                    <!-- responsive nav button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- /responsive nav button -->

                    <!-- logo -->
                    <h1 class="navbar-brand">
                        <a href="#body">
                            <div class="site-logo"><span>D</span>pcore</div>
                        </a>
                    </h1>
                    <!-- /logo -->

                    </div>

                    <!-- main nav -->
                    <nav class="collapse navigation navbar-collapse navbar-right" role="navigation">
                        <ul id="nav" class="nav navbar-nav">
                            <li class="current"><a href="#home">主页</a></li>
                            <li><a href="#service">简介</a></li>
                            <li><a href="#portfolio">使用文档</a></li>
                            <li><a href="#contact">系统体验</a></li>
                        </ul>
                    </nav>
                    <!-- /main nav -->
                </div>

            </div>
        </header>
        <!--
        End Fixed Navigation
        ==================================== -->


        <!--
        Home Slider
        ==================================== -->
        <section id="home">     
            <div class="container1">
                <div class="home-intro">
                    <div class="animated bounceInRight">
                        <h2>HELLO Dpcore <br>分布式图片存储服务</h2>
                        <p>开源分布式图片存储系统，使用web服务形式，用户可自行在github下载源码进行编译，系统能将多个廉价不可靠的主机整合起来提供稳定的服务，每个主机作为一个数据节点，系统分为管理端master和数据节点slave，建议用户至少部署两个slave并选择在一个局域网中的主机，提高同步效率</p>
                        <ul class="list-inline available">
                            <li><span>Developed by :</span></li>
                            <li>duiya<li>
                        <!-- <li><i class="fa fa-android"></i></li>
                            <li><i class="fa fa-apple"></i></li>
                            <li><i class="fa fa-windows"></i></li> -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <!--
        End #home Slider
        ========================== -->

        
        <!--
        #service
        ========================== -->
        <section id="service">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-title text-center wow fadeInDown">
                            <h2>Introduce</h2>    
                            <p>系统使用java语言开发，用户可自行下载源码进行扩展，集群主机之间以及用户交互使用http协议，提供web网页图片存储</p>
                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="col-md-4 col-sm-6 wow fadeInLeft">
                        <div class="media service-item">
                            <a href="#" class="pull-left text-center">
                                <div class="fact-icon">
                                    <i class="fa fa-cog fa-lg"></i>
                                </div>
                            </a>
                            <div class="media-body">
                                <h3>自动化配置</h3>
                                <p>配置简单，只需将编译后war包放在web容器启动容器，系统能实现自动注册恢复</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6 wow fadeInLeft">
                        <div class="media service-item">
                            <a href="#" class="pull-left text-center">
                                <div class="fact-icon">
                                    <i class="fa fa-cog fa-lg"></i>
                                </div>
                            </a>
                            <div class="media-body">
                                <h3>负载均衡</h3>
                                <p>master将拦截访问系统的http请求，按一定机制均衡的将请求分发给slave端处理</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 col-sm-6 wow fadeInLeft">
                        <div class="media service-item">
                            <a href="#" class="pull-left text-center">
                                <div class="fact-icon">
                                    <i class="fa fa-cog fa-lg"></i>
                                </div>
                            </a>
                            <div class="media-body">
                                <h3>自动备份</h3>
                                <p>文件自动备，目前版本采用全备份，后期会将备份机制进行更改</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 col-sm-6 wow fadeInLeft">
                        <div class="media service-item">
                            <a href="#" class="pull-left text-center">
                                <div class="fact-icon">
                                    <i class="fa fa-cog fa-lg"></i>
                                </div>
                            </a>
                            <div class="media-body">
                                <h3>系统安全</h3>
                                <p>系统关键接口使用RSA算法验证数据，提高系统安全性</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 col-sm-6 wow fadeInLeft">
                        <div class="media service-item">
                            <a href="#" class="pull-left text-center">
                                <div class="fact-icon">
                                    <i class="fa fa-cog fa-lg"></i>
                                </div>
                            </a>
                            <div class="media-body">
                                <h3>系统依赖</h3>
                                <p>系统数据存储在mysq缓存需要使用redis，需要依赖mysql和redis</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 col-sm-6 wow fadeInLeft">
                        <div class="media service-item">
                            <a href="#" class="pull-left text-center">
                                <div class="fact-icon">
                                    <i class="fa fa-cog fa-lg"></i>
                                </div>
                            </a>
                            <div class="media-body">
                                <h3>运行环境</h3>
                                <p>系统需运行在linux系统，jdk8u211及以上，tomcat8.5及以上版本</p>
                            </div>
                        </div>
                    </div>

                </div> <!-- end .row -->
            </div> <!-- end .container -->
        </section>
        <!--
        End #service
        ========================== -->


        <!--
        #Portfolio
        ========================== -->
        
        <section id="portfolio">
            <div class="section-title text-center wow fadeInDown">
                <h2>option</h2>    
            </div>

            <div class="dservices">
                <div class="container">
                    <div class="drow">
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <ul class="dright-text">
                                <li>
                                    <h4 class="duiya2">
                                        <strong>用户注册</strong>
                                        <i class="fa fa-tablet"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">用户需在系统界面进行注册，注册时需要提供账号密码以及用户公钥<br>密钥使用RSA算法，长度为1024b</p>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="duiya2">
                                        <strong>请求tocken</strong>
                                        <i class="fa fa-cog"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">用户请求token时，建议用户的后台服务器向系统发送get请求<br>/file/getFlag，参数为(account)账户名和密码(password) <table></table></p>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="duiya2">
                                        <strong>处理Token</strong>
                                        <i class="fa fa-tachometer"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">用户后台服务器收到Token后使用自己的私钥解密Token得到flag<br>将flag传给用户前端</p>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="duiya2">
                                        <strong>文件上传</strong>
                                        <i class="fa fa-file-code-o"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">前端收到flag后，发送post文件上传请求/file/upload<br>参数为账户名(account)、flag和图片(file)</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <ul class="dleft-text">
                                <li>
                                    <h4 class="duiya2">
                                        <strong>返回地址</strong>
                                        <i class="fa fa-eye"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">返回数据使用json解析，含code,msg,data字段，code为0表示成功，data格式为key-value。key为本地图片名字，value为在图片存储服务器地址</p>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="duiya2">
                                        <strong>存储地址</strong>
                                        <i class="fa fa-shield"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">前端将返回的数据解析后传给自己的后台服务器，或者直接将返回的数据传给后台服务器，后台服务器进行解析，将数据存入自己服务器</p>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="duiya2">
                                        <strong>获取地址</strong>
                                        <i class="fa fa-film"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">用户需要在web网页显示图片时，请求自己的后台服务器，返回需要的图片在图片服务器的地址</p>
                                    </div>
                                </li>
                                <li>
                                    <h4 class="duiya2">
                                        <strong>请求图片</strong>
                                        <i class="fa fa-fire"></i>
                                    </h4>
                                
                                    <div class="dcontent-text">
                                        <p class="duiya">用户使用自己后台服务器返回的地址访问文件，get请求地址/file/get?location=图片地址，地址为固定长度28位字符</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div><!-- /container -->       
            </div>

        </section>
        <!--
        End #Portfolio
        ========================== -->

<!--
        #contact
        ========================== -->
        <section id="contact">
            <div class="container login_view" style="display:show">
                <div class="row">

                    <div class="section-title text-center wow fadeInDown">
                        <h2 class="login_regist">Login</h2>
                    </div>
                    
                    <div class="col-md-8 col-md-offset-2 wow fadeInLeft">
                        <div class="contact-form clearfix">
                            <div class="text-center" action="index.html" method="post">
                                <div class="input-field">
                                    <input type="text" class="form-control" name="name" placeholder="ACCOUNT" id="lo_acc">
                                </div>
                                <div class="input-field">
                                    <input type="password" class="form-control" name="email" placeholder="PASSWORD" id="lo_pass">
                                </div>
                                <input type="submit" class="btn btn-blue" value="Login" id="login_login">
                                <input type="submit" class="btn btn-gray login_regist" value="Regist">
                            </div>
                        </div> <!-- end .contact-form -->
                    </div> <!-- .col-md-8 -->
                </div>
            </div>

            <div class="container regist_view" style="display:none">
                <div class="row">
                    <div class="section-title text-center wow fadeInDown">
                        <h2 class="regist_login">Regist</h2>
                    </div>
                    <div class="col-md-8 col-md-offset-2 wow fadeInLeft">
                        <div class="contact-form clearfix">
                            <div class="text-center" action="index.html" method="post">
                                <div class="input-field">
                                    <input type="text" class="form-control" name="name" placeholder="Your Account" id="rg_acc">
                                </div>
                                <div class="input-field">
                                    <input type="password" class="form-control" name="email" placeholder="Your Password" id="rg_pass">
                                </div>
                                <div class="input-field">
                                    <input type="email" class="form-control" name="email" placeholder="Your Email" id="rg_email">
                                </div>
                                <div class="input-field message">
                                    <textarea name="message" class="form-control" placeholder="Your PublicKey" id="rg_key"></textarea>
                                </div>
                                <input type="submit" class="btn btn-blue" value="Regist" id="regist_regist">
                                <input type="submit" class="btn btn-gray regist_login" value="Login">
                            </div>
                        </div> <!-- end .contact-form -->
                    </div> <!-- .col-md-8 -->
                </div>
            </div>
        </section>
        <!--
        End #contact
        ========================== -->

        <footer id="footer" class="text-center">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="footer-social wow fadeInUp">
                            <h3><span>D</span>pcore</h3>
                        </div>
                    </div>
                </div>
            </div>
        </footer>


<!--
        JavaScripts
        ========================== -->
        
        <!-- main jQuery -->
        <script src="js/jquery-2.0.0.min.js"></script>
        <script src="js/jquery.cookie.js"></script>
        <!-- Bootstrap -->
        <script src="js/bootstrap.min.js"></script>
        <!-- jquery.nav -->
        <script src="js/jquery.nav.js"></script>
        <!-- Portfolio Filtering -->
        <script src="js/jquery.mixitup.min.js"></script>
        <!-- Fancybox -->
        <script src="js/jquery.fancybox.pack.js"></script>
        <!-- Parallax sections -->
        <script src="js/jquery.parallax-1.1.3.js"></script>
        <!-- jQuery Appear -->
        <script src="js/jquery.appear.js"></script>
        <!-- countTo -->
        <script src="js/jquery-countTo.js"></script>
        <!-- owl carousel -->
        <script src="js/owl.carousel.min.js"></script>
        <!-- WOW script -->
        <script src="js/wow.min.js"></script>
        <!-- theme custom scripts -->
        <script src="js/main.js"></script>

        <script type="text/javascript">
            $(".login_regist").click(function(){
                $(".regist_view").show();
                $(".login_view").hide();
            });

            $(".regist_login").click(function(){
                $(".regist_view").hide();
                $(".login_view").show();
            });

            $("#login_login").click(function(){

                var acc = $("#lo_acc").val();
                var pass = $("#lo_pass").val();
                var curWwwPath=window.location.href;
                var pathName=window.location.pathname;
                var pos=curWwwPath.indexOf(pathName);
                var baseurl=curWwwPath.substring(0,pos);
                $.ajax({  
                    type : "POST",  
                    url : "user/login",
                    xhrFields: {
                        withCredentials: true
                    },
                    crossDomain: true,
                    data: {"account":acc,"password":pass},
                    dataType:"json", 
                    success : function(result) {  
                        var message = eval(result);
                        if(message.code == 0){
                            $.cookie('account',acc);
                            window.location.href=message.data;
                        }else{
                            alert(message.msg);
                        }
                    },
                    error: function(str) {
                        alert("error");
                    }
                });

            });

            $("#regist_regist").click(function(){
                var acc = $("#rg_acc").val();
                var pass = $("#rg_pass").val();
                var mail = $("#rg_email").val();
                var key = $("#rg_key").val();
                $.ajax({  
                    type : "POST",  
                    url : "user/regist",
                    xhrFields: {
                        withCredentials: true
                    },
                    crossDomain: true,
                    data: {"account":acc,"password":pass,"userEmail":mail,"publicKey":key},
                    dataType:"json", 
                    success : function(result) {  
                        var message = eval(result);
                        alert(message.data);
                    },
                    error: function(str) {
                        alert("error");
                    }
                });

            });



        </script>


    </body>
</html>
